{"id":"AGN-016","type":"ddr","title":"Checkpoint Restore and Branch Policy","status":"Approved","approvedBy":"Kevin Wolf","approvalTimestamp":"2025-12-16 17:00:00 EST (UTC-05:00)","guidingPrinciple":"Aptix favors free-form creativity by default, and introduces structure only when the user signals readiness or when durability is at risk.","summary":"Decide on what gets saved and/or transferred when a user restores a checkpoint, also if they can go back to the original non-checkpoint stream.","content":"AGN-016 defines a restore-as-branch policy with two restore modes (Soft continuity-first and Hard performance-first). It specifies deterministic state transfer rules, the separation of durable session state from ephemeral LLM chains, and user-facing transparency via summary-by-default and details-on-demand. Turn identity is always referenced by (SessionId, TurnId) because branches may contain identical TurnIds. File contents are never implicitly replayed; only references/hashes are transferred and content is rehydrated via tools under a token budget. RAG is treated as an optional optimization via a pluggable rehydration provider. Logging requirements include structured correlation fields and lifecycle events for restores."}
