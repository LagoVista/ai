{"s":"meta","t":"SYS-001: Aptix Agent Development Workflow. Governs how all DDRs, tools, specs, and system design work are created, reviewed, approved, and bundled across the LagoVista / Aptix ecosystem."}
{"s":"id_scheme","t":"DDR IDs use TLA-### format (e.g., TUL-002, SYS-001). TLA is a three-letter domain code such as AGN, TUL, SYS, UIX. Index is zero-padded (001, 002, ...) and must be globally unique per TLA across all repositories; numbers are never reused."}
{"s":"id_tracking","t":"Aptix must track: all TLAs introduced, next sequence number per TLA, and guarantee uniqueness for each TLA. ID allocation must use the userâ€™s local timezone when capturing approval, defaulting to US Eastern if unknown."}
{"s":"overview","t":"High-level workflow: (1) assign DDR ID, (2) draft DDR spec in-stream before implementation, (3) start with 50K-foot summary, (4) review each summary bullet one-by-one in detail, (5) ask clarifying questions only when useful, (6) get explicit approval, (7) generate DDR bundle into ./ddrs/, (8) generate code only when explicitly requested, (9) tests acknowledged but deferred to separate DDRs, (10) Aptix must remember and reuse this workflow long-term."}
{"s":"summary","t":"50K-foot summary must be short, theme-focused, and free of deep implementation details. Goal is early alignment and cheap correction before detailed work. Summary is always produced before deep-dive sections."}
{"s":"deep_dive","t":"After summary is accepted, Aptix expands each bullet one at a time into detailed text with rationale, responsibilities, and edge cases. For each bullet: expand, get feedback, refine, and then move to the next. This prevents skipping important topics."}
{"s":"clarifications","t":"Aptix should ask clarifying questions when there is real ambiguity, missing information, or risk of misinterpretation. Aptix must not invent questions to satisfy a quota. Number of questions is adaptive and may be zero if no clarification is needed. If clarification is needed, questions must come before detailed expansion for that bullet."}
{"s":"pushback","t":"Aptix is expected to push back when requirements conflict with existing DDRs, introduce clear risk or complexity, or when there is a significantly better design direction. Collaboration is balanced: ask when it matters, skip when it does not."}
{"s":"approval","t":"A DDR is complete only after explicit user approval. Before approval, Aptix must not generate DDR bundles, code, or tests. On approval, Aptix must record approver identity and approval timestamp with timezone. If DDR content changes after approval, it becomes unapproved and must be presented again for re-approval."}
{"s":"bundling_rules","t":"Upon approval, Aptix generates an Aptix file bundle containing exactly one file: the DDR markdown file, path ./ddrs/[DDR_ID] - [Title].md. That bundle must not include any implementation code, helpers, orchestrators, or tests. Additional artifacts are generated only when explicitly requested as separate bundles."}
{"s":"ddr_content","t":"DDR markdown file must include: DDR ID, Title, Status (e.g., Draft or Approved), approval metadata (approver and timestamp) once approved, and complete DDR specification text. Each DDR is a self-contained governance artifact."}
{"s":"repo_structure","t":"Every repository in the LagoVista / Aptix ecosystem must have a top-level ./ddrs directory. All DDRs for that repo are stored there. DDRs should normally live in the repo matching their semantics, but the system does not strictly enforce which repo a DDR must reside in beyond the ./ddrs requirement."}
{"s":"indexing","t":"All DDRs across all repositories are indexed into a global knowledge space (e.g., RAG index) so agents can search across the entire ecosystem. Indexing should occur whenever DDR files are pushed so the index and repository remain in sync."}
{"s":"drift","t":"If any DDR content in the index disagrees with the repository version, this is drift and must be treated as a critical error. Automated processes depending on that DDR must halt or fail fast. Drift requires manual user intervention and review. No silent auto-correction or automatic reconciliation is allowed."}
{"s":"codegen_deferred","t":"Code generation happens only when explicitly requested by the user and only after the DDR is approved and bundled. Detailed code structure, naming, and patterns are deferred to a dedicated code-generation DDR (e.g., SYS-00X). SYS-001 only defines the workflow, not specific code styles."}
{"s":"testgen_deferred","t":"SYS-001 recognizes that implementation code should be accompanied by tests and that tests live under project-specific test folders (e.g., ./tests/Project.Tests/). Detailed test standards (structure, mocking, coverage, LLM test validation) are deferred to a separate DDR (e.g., SYS-00Y)."}
{"s":"persistence","t":"SYS-001 defines a long-term workflow that persists across sessions and workstreams. Every significant feature, tool, behavior, or system design change must begin with an in-stream DDR. DDRs must follow summary-then-deep-dive review, clarifying questions when useful, explicit approval before artifacts, storage under ./ddrs, global indexing, and TLA+index ID scheme with global uniqueness per TLA."}
{"s":"agent_rule","t":"Agents must remember SYS-001 and automatically apply its workflow to all future DDRs: create summary first, deep-dive bullet-by-bullet, ask clarifying questions only when needed, require explicit approval before bundles or code, and respect DDR drift and indexing rules."}